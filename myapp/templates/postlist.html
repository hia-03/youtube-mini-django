<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Posts</title>
  <style>
    *{box-sizing:border-box}
    body{margin:0;background:#0b0e11;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial}
    .wrap{width:94%;max-width:1100px;margin:24px auto}
    .top{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
    .btn{appearance:none;border:1px solid #2a3441;background:#0e1318;color:#e5e7eb;padding:8px 10px;border-radius:0;text-decoration:none;font-weight:600;cursor:pointer;font-size:14px}
    .btn.primary{background:#1a1f25;border-color:#2a3441}
    .btn.danger{background:#ef4444;border-color:#ef4444;color:#0b0e11}
    .panel{background:#12161b;border:1px solid #1f2937;border-radius:0}
    .filters{padding:12px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:8px}
    .grid .col-4{grid-column:span 4}
    .grid .col-3{grid-column:span 3}
    .grid .col-2{grid-column:span 2}
    .grid .col-12{grid-column:1/-1}
    label{color:#9aa0a6;font-size:12px;margin-bottom:4px;display:block}
    input[type="text"],input[type="number"],select{width:100%;background:#0e1318;border:1px solid #1f2937;border-radius:0;color:#e5e7eb;padding:8px}
    .list{margin-top:12px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
    .card{overflow:hidden}
    .video{background:#0e1318}
    .video video{width:100%;display:block;border-bottom:1px solid #1f2937}
    .body{padding:10px}
    .title{font-weight:700;margin:0 0 6px;font-size:14px}
    .meta{color:#9aa0a6;font-size:12px}
    .actions{padding:10px;display:flex;justify-content:flex-end;gap:8px;border-top:1px solid #1f2937}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <a class="btn" href="{% url 'home' %}">Home</a>
      <a class="btn" href="{% url 'list-user' %}">Users</a>
      <a class="btn" href="{% url 'list-post' %}">Posts</a>
    </div>

    <div class="panel filters">
      <form class="grid" method="get">
        <div class="col-4">
          <label>Title contains</label>
          <input type="text" name="title" value="{{ request.GET.title }}">
        </div>
        <div class="col-2">
          <label>Post ID</label>
          <input type="number" name="movid" value="{{ request.GET.movid }}">
        </div>
        <div class="col-3">
          <label>Author</label>
          <select name="uservideo">
            <option value="">-- Any user --</option>
            {% for user in users %}
              <option value="{{ user.id }}" {% if request.GET.uservideo == user.id|stringformat:'s' %}selected{% endif %}>{{ user.first_name }} {{ user.last_name }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-3">
          <label>Post</label>
          <select name="titlo">
            <option value="">-- Any post --</option>
            {% for p in posts %}
              <option value="{{ p.id }}" {% if request.GET.titlo == p.id|stringformat:'s' %}selected{% endif %}>{{ p.title }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12" style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn primary" type="submit">Apply Filters</button>
          <a class="btn" href="{% url 'list-post' %}">Reset</a>
        </div>
      </form>
    </div>

    <div class="list">
      {% for post in posts %}
      <div class="panel card">
        <div class="video">
          <video controls>
            <source src="{{ post.video.url }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="body">
          <div class="title">{{ post.title }}</div>
          <div class="meta">{{ post.description }}</div>
          <div class="meta">By {{ post.user_id }} • {{ post.created_at }}</div>
        </div>
        <div class="actions">
          <a href="{% url 'update-post' post.id %}" class="btn">Update</a>
          <a href="{% url 'delete-post' post.id %}" class="btn danger">Delete</a>
          <a href="{% url 'post-getbyid' post.id %}" class="btn">выдит видео<a/>
        </div>
      </div>
      {% empty %}
      <div class="panel" style="padding:14px">No posts found.</div>
      {% endfor %}
    </div>
  </div>
</body>
</html>
